# flask-crypto-files-server
Файловый Flask сервер с шифрованием хранящихся в MongoDB файлов


Требуется организовать REST-api с помощью фреймворка flask, организующий получение файла, шифрование файла, хранение файла в бд и предоставляющий доступ к файлу:

1. Пользователь должен быть авторизован (можно организовать ендпоинты для регистрации, а можно предположить, что существует бд с пользователями)

2. В сервисе должен быть реализован ендпоинт, который принимает octet-stream, содержащий любой файл. Ответом на сообщение будет идентификатор файла в бд.

3. Полученный файл должен быть зашифрован по рандомному ключу и положен в бд MongoDB.

4. Должен быть предусмотрен ендпоинт для получения зашифрованного файла по идентификатору.

5. Должен быть предусмотрен ендпоинт для получения ключа шифрования.

6. Должно быть предусмотрено, что пользователь может получать ключ шифрования только для своих файлов. 


###Регистрация нового пользователя
Для регистрации нового пользователя необходимо отправить POST запрос к адресу
/registration содержащий два заголовка:
New_User_Name: и New_User_Password: с именем нового пользователя и паролем
соответственно. Пример запроса через curl
```bash
curl -v -H "New_User_Name: User1" -H "New_User_Password: Password" -X POST  localhost:5000/registration
```

###Авторизация
Для авторизации ранее созданного пользователя необходимо отправить GET запрос
к адресу /login содержащий два заголовка:
User_Name: и User_Password: с именем пользователя и паролем
соответственно. В ответ будет оправлен токен для дальнейшей авторизации
Пример запроса через curl
```bash
curl -v -H "User_Name: User" -H "User_Password:Password" -X GET  localhost:5000/login
```

###Использование личного токена
После получения личного токена его необходимо использовать во всех запросах
к авторизированным эндпоинтам. Передавать его необходимо в поле
x-access-tokens:
Для проверки корректности токена реализован тестовый эндпоинт /test_login
Пример запроса через curl
```bash
curl -v -H "x-access-tokens:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwdWJsaWNfaWQiOiI1NDRjMzBhYy03N2ExLTQ4MmEtYmM2Yi1mZjg1NWMyZjAyZDMiLCJleHAiOjE2MzEzNjQ4MzJ9.GkFnT7fnkVg51DtkEhdyf8n0CFSTy_UN0mCyJxjd8HA" -X GET  localhost:5000/test_login
```
В случае корректного токена вы получите сообщение с вашим логином
```
Login is OK, your name: User
```